import FreeCAD
import Part
import InvoluteGearFeature

def create_spur_gear():
    # پارامترهای چرخ دنده
    module = 1.0           # باید همان مدول چرخ دنده شانه‌ای باشد (1.0)
    teeth = 20             # تعداد دندانه‌ها (مناسب برای قطر متوسط)
    pressure_angle = 20.0  # زاویه فشار (درجه) - همانند چرخ دنده شانه‌ای
    thickness = 12.0       # ضخامت چرخ دنده (مثل عرض چرخ دنده شانه‌ای)
    
    # ایجاد چرخ دنده
    doc = FreeCAD.ActiveDocument
    if doc is None:
        doc = FreeCAD.newDocument("GearAssembly")
    
    # استفاده از ماژول InvoluteGearFeature برای ایجاد چرخ دنده استاندارد
    gear = InvoluteGearFeature.makeInvoluteGear(module, teeth, pressure_angle)
    gear_obj = doc.addObject("Part::Feature", "SpurGear")
    gear_obj.Shape = gear.toShape()
    
    # اکسترود کردن چرخ دنده به ضخامت مورد نظر
    extruded_gear = gear_obj.Shape.extrude(FreeCAD.Vector(0, 0, thickness))
    gear_obj.Shape = extruded_gear
    
    # تنظیمات نمایش
    gear_obj.ViewObject.ShapeColor = (0.33, 0.33, 0.67)  # رنگ آبی-خاکستری
    doc.recompute()
    
    return gear_obj

# اجرای تابع
spur_gear = create_spur_gear()
