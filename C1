import FreeCAD
import Part
import Draft
import math

# تنظیمات اولیه
length = 80.0  # طول استوانه بر حسب میلی‌متر (8 سانت)
radius = 7.5  # شعاع استوانه بر حسب میلی‌متر (قطر 15mm → شعاع 7.5mm)
tooth_depth = 1.0  # عمق دندانه بر حسب میلی‌متر
tooth_width = 2.0  # عرض دندانه بر حسب میلی‌متر (اختیاری، می‌توانید تغییر دهید)
num_teeth = 20  # تعداد دندانه‌ها (اختیاری)

# ایجاد استوانهٔ پایه
cylinder = Part.makeCylinder(radius, length)

# ایجاد دندانه‌ها (به صورت پروفیل دندانه‌های ساده)
teeth = []
for i in range(num_teeth):
    angle = 2 * math.pi * i / num_teeth  # زاویه در رادیان
    x1 = radius * math.cos(angle)
    y1 = radius * math.sin(angle)
    x2 = (radius + tooth_depth) * math.cos(angle)
    y2 = (radius + tooth_depth) * math.sin(angle)
    
    # ایجاد خطوط برای دندانه (به شکل مثلث ساده)
    tooth_edge = Part.makeLine((x1, y1, 0), (x2, y2, 0))
    tooth_edge2 = Part.makeLine((x2, y2, 0), (x1, y1, length))
    tooth_edge3 = Part.makeLine((x1, y1, length), (x1, y1, 0))
    
    wire = Part.Wire([tooth_edge, tooth_edge2, tooth_edge3])
    face = Part.Face(wire)
    tooth = face.extrude(FreeCAD.Vector(0, 0, length))
    teeth.append(tooth)

# ترکیب دندانه‌ها با استوانه
gear = cylinder
for tooth in teeth:
    gear = gear.fuse(tooth)

# نمایش در FreeCAD
Part.show(gear)
