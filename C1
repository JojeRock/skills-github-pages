import FreeCAD
import Part
from FreeCAD import Base

# ایجاد سند جدید
doc = FreeCAD.newDocument("CylinderWithCut")

# پارامترهای استوانه
diameter = 1.5  # قطر به سانتیمتر
radius = diameter / 2
length = 8.0    # طول به سانتیمتر
cut_distance = 0.5  # فاصله برش از مرکز به سانتیمتر

# ایجاد استوانه اصلی
cylinder = Part.makeCylinder(radius, length, Base.Vector(0,0,0), Base.Vector(0,0,1))

# ایجاد جعبه برش (نیمه بی نهایت)
# این روش برای FreeCAD 1.0.1 مطمئن تر است
cut_box = Part.makeBox(radius*4, radius*4, length*2, 
                      Base.Vector(cut_distance, -radius*2, -length/2))

# انجام عملیات برش
result = cylinder.cut(cut_box)

# اضافه کردن شیء به سند
cylinder_obj = doc.addObject("Part::Feature", "CutCylinder")
cylinder_obj.Shape = result

# تنظیم نمایش
FreeCADGui.ActiveDocument.ActiveView.viewAxometric()
FreeCADGui.SendMsgToActiveView("ViewFit")
doc.recompute()
