import FreeCAD
import Part
import math

# پارامترهای چرخدنده
length = 80.0  # طول استوانه (محور Z)
radius = 7.5  # شعاع استوانه (mm)
tooth_depth = 1.0  # عمق دندانه (mm)
tooth_width = 4.0  # عرض هر دندانه (mm)
num_teeth = 16  # تعداد دندانه‌ها در محیط

# ایجاد استوانه پایه
cylinder = Part.makeCylinder(radius, length)

# ایجاد دندانه‌های عرضی (موازی محور Y)
for i in range(num_teeth):
    # محاسبه موقعیت دندانه روی محیط
    angle = 2 * math.pi * i / num_teeth
    x_start = radius * math.cos(angle)
    y_start = radius * math.sin(angle)
    
    # ایجاد مکعب برای دندانه (در راستای عرضی - محور Y)
    tooth = Part.makeBox(
        tooth_depth,  # طول در X (عمق دندانه)
        tooth_width,  # طول در Y (عرض دندانه)
        length,       # طول در Z (همانند استوانه)
        FreeCAD.Vector(x_start, y_start - tooth_width/2, 0),  # نقطه شروع
        FreeCAD.Vector(math.cos(angle), math.sin(angle), 0)  # جهت
    )
    
    # اضافه کردن دندانه به استوانه
    cylinder = cylinder.fuse(tooth)

# نمایش نتیجه
Part.show(cylinder)
FreeCAD.ActiveDocument.recompute()
