import FreeCAD, Part, math
from FreeCAD import Base

# ایجاد یک سند جدید
doc = FreeCAD.newDocument("CutCylinder")

# ساخت استوانه توپر (طول 80mm، قطر 16mm)
cylinder = doc.addObject("Part::Cylinder", "SolidCylinder")
cylinder.Height = 80.0  # 8 cm = 80 mm
cylinder.Radius = 8.0   # قطر 1.6 cm = شعاع 8 mm
cylinder.Placement = Base.Placement(Base.Vector(0, 0, 0), Base.Rotation(0, 0, 0), Base.Vector(0, 0, 0))

# ساخت صفحه برش (با فاصله 5mm از مرکز)
# صفحه به صورت عمودی و با offset 5mm در جهت X قرار می‌گیرد
cut_plane = Part.Plane(Base.Vector(5, 0, 0), Base.Vector(1, 0, 0))

# ایجاد یک جعبه (Box) بزرگ به عنوان ابزار برش
# (بزرگ‌تر از استوانه باشد تا برش به درستی انجام شود)
cut_tool = doc.addObject("Part::Box", "CuttingTool")
cut_tool.Length = 50.0
cut_tool.Width = 50.0
cut_tool.Height = 100.0
cut_tool.Placement = Base.Placement(Base.Vector(5, -25, -10), Base.Rotation(0, 0, 0), Base.Vector(0, 0, 0))

# انجام عملیات برش
cut_result = doc.addObject("Part::Cut", "CutResult")
cut_result.Base = cylinder
cut_result.Tool = cut_tool
doc.recompute()

# مخفی کردن ابزار برش و استوانه اصلی (اختیاری)
cut_tool.ViewObject.Visibility = False
cylinder.ViewObject.Visibility = False

# نمایش نتیجه نهایی
FreeCAD.ActiveDocument.recompute()
FreeCADGui.ActiveDocument.ActiveView.fitAll()
