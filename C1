import FreeCAD
import Part
from FreeCAD import Base

doc = FreeCAD.newDocument("CorrectCutCylinder")

# پارامترها (مقیاس میلی‌متر)
diameter = 16.0
radius = diameter / 2
length = 80.0
cut_position = 5.0  # فاصله برش از مرکز به سمت راست

# 1. ایجاد استوانه اصلی
cylinder = Part.makeCylinder(radius, length, Base.Vector(0,0,0), Base.Vector(0,0,1))

# 2. ایجاد جعبه حذف برای قسمت سمت چپ (کوچکتر)
#    عرض جعبه = cut_position + radius (تا پوشش کامل قسمت چپ)
#    نقطه شروع: (-radius, -radius, 0) از لبه استوانه
delete_box = Part.makeBox(cut_position + radius, 
                         diameter * 1.1,  # کمی بزرگتر برای اطمینان
                         length * 1.1,
                         Base.Vector(-radius, -radius, 0))

# 3. حذف قسمت چپ (کوچکتر)
final_cylinder = cylinder.cut(delete_box)

# 4. نمایش نتیجه
result_obj = doc.addObject("Part::Feature", "LeftPartRemoved")
result_obj.Shape = final_cylinder

FreeCADGui.ActiveDocument.ActiveView.viewAxometric()
FreeCADGui.SendMsgToActiveView("ViewFit")
doc.recompute()
